<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1a1a2e">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>TickTick Ultra PRO</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <button class="menu-toggle" onclick="toggleSidebar()">â˜°</button>
    
    <div class="sidebar" id="sidebar">
        <div class="logo">âœ“ TickTick Ultra PRO</div>
        
        <div class="menu-item active" onclick="changeView('inbox')">
            ğŸ“¥ Inbox
            <span class="badge" style="background: var(--primary); color: white;" id="inboxCount">0</span>
        </div>
        <div class="menu-item" onclick="changeView('today')">ğŸ“… Hoy</div>
        <div class="menu-item" onclick="changeView('week')">ğŸ“† Semana</div>
        <div class="menu-item" onclick="changeView('month')">ğŸ—“ï¸ Mes</div>
        
        <div class="menu-section">ğŸ“ Estudiante</div>
        <div class="menu-item" onclick="changeView('schedule')">ğŸ“š Horario Clases</div>
        <div class="menu-item" onclick="changeView('exams')">ğŸ“ ExÃ¡menes</div>
        
        <div class="menu-section">ğŸ’ª Productividad</div>
        <div class="menu-item" onclick="changeView('habits')">ğŸ’ª HÃ¡bitos</div>
        <div class="menu-item" onclick="changeView('pomodoro')">ğŸ… Pomodoro</div>
        <div class="menu-item" onclick="changeView('stats')">ğŸ“ˆ EstadÃ­sticas</div>
        
        <div class="menu-section">âš™ï¸ MÃ¡s</div>
        <div class="menu-item" onclick="changeView('settings')">âš™ï¸ ConfiguraciÃ³n</div>
    </div>
    
    <div class="main-content">
        <div class="header">
            <div class="header-title" id="viewTitle">Inbox</div>
            <div style="display: flex; gap: 15px; align-items: center; flex-wrap: wrap;">
                <button class="btn btn-secondary btn-small" onclick="goToToday()">ğŸ“… Hoy</button>
                <button class="btn btn-primary btn-small" onclick="openTaskModal()">+ Nueva Tarea</button>
            </div>
        </div>
        
        <div class="content-card">
            <div id="mainContent"></div>
        </div>
    </div>
    
    <button class="fab" onclick="openTaskModal()">+</button>
    
    <!-- MODAL DE TAREA -->
    <div class="modal" id="taskModal">
        <div class="modal-content">
            <div class="modal-header" id="modalTitle">Nueva Tarea</div>
            <form onsubmit="saveTask(event)">
                <div class="form-group">
                    <label class="form-label">ğŸ“ TÃ­tulo *</label>
                    <input type="text" class="form-input" id="taskTitle" required placeholder="Â¿QuÃ© necesitas hacer?">
                </div>
                
                <div class="form-group">
                    <label class="form-label">ğŸ“„ DescripciÃ³n</label>
                    <textarea class="form-textarea" id="taskDesc" placeholder="AÃ±ade detalles..."></textarea>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div class="form-group">
                        <label class="form-label">ğŸ“… Fecha</label>
                        <input type="date" class="form-input" id="taskDate" onchange="updateReminderOptions()">
                    </div>
                    <div class="form-group">
                        <label class="form-label">â° Hora</label>
                        <input type="time" class="form-input" id="taskTime" onchange="updateReminderOptions()">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">âš¡ Prioridad</label>
                    <div class="priority-options">
                        <div class="priority-btn active" data-priority="none" onclick="selectPriority('none')">
                            <div>âšª</div>
                            <div style="font-size: 12px;">Ninguna</div>
                        </div>
                        <div class="priority-btn" data-priority="low" onclick="selectPriority('low')">
                            <div>ğŸŸ¢</div>
                            <div style="font-size: 12px;">Baja</div>
                        </div>
                        <div class="priority-btn" data-priority="medium" onclick="selectPriority('medium')">
                            <div>ğŸŸ¡</div>
                            <div style="font-size: 12px;">Media</div>
                        </div>
                        <div class="priority-btn" data-priority="high" onclick="selectPriority('high')">
                            <div>ğŸ”´</div>
                            <div style="font-size: 12px;">Alta</div>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">ğŸ”” Recordatorios</label>
                    <select class="form-input" id="reminderSelect" onchange="addReminder(this.value)">
                        <option value="">Seleccionar...</option>
                    </select>
                    <div id="remindersContainer" style="margin-top: 10px;"></div>
                    <div id="reminderWarning" style="margin-top: 10px; padding: 10px; background: var(--warning); color: white; border-radius: 8px; display: none; font-size: 13px;">
                        âš ï¸ Selecciona fecha y hora primero
                    </div>
                </div>
                
                <div style="display: flex; gap: 10px; margin-top: 30px;">
                    <button type="submit" class="btn btn-primary" style="flex: 1;">ğŸ’¾ Guardar</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">âœ• Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ğŸ”¥ FIREBASE SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, addDoc, getDocs, updateDoc, deleteDoc, doc, onSnapshot, query, orderBy, setDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        
        // ğŸ”¥ TU CONFIGURACIÃ“N DE FIREBASE
        const firebaseConfig = {
            apiKey: "AIzaSyCHS-hDkcZKgVKY9pMtjblgq_jiPdD95XM",
            authDomain: "timeforyou-72f22.firebaseapp.com",
            projectId: "timeforyou-72f22",
            storageBucket: "timeforyou-72f22.firebasestorage.app",
            messagingSenderId: "267962735772",
            appId: "1:267962735772:web:1f26b8463a9b659d5a6159"
        };

        // Inicializar Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Hacer disponible globalmente
        window.db = db;
        window.firestore = { collection, addDoc, getDocs, updateDoc, deleteDoc, doc, onSnapshot, query, orderBy, setDoc };
        
        console.log('ğŸ”¥ Firebase inicializado correctamente');
        console.log('ğŸ“Š Proyecto:', firebaseConfig.projectId);
    </script>

    <!-- TU APP -->
    <script src="app.js"></script>

    <!-- SERVICE WORKER -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js')
                .then(reg => console.log('âœ… Service Worker registrado:', reg.scope))
                .catch(err => console.error('âŒ Error en Service Worker:', err));
        }
    </script>
</body>
</html>
